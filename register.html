<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Registro</title>
        <link href="css/styles.css" rel="stylesheet" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js" crossorigin="anonymous"></script>
    </head>
    <body class="bg-primary">
        <div id="layoutAuthentication">
            <div id="layoutAuthentication_content">
                <main>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-7">
                                <div class="card shadow-lg border-0 rounded-lg mt-5">
                                    <div class="card-header"><h3 class="text-center font-weight-light my-4">AG Hospital - Registro del Paciente</h3></div>
                                    <div class="card-body">
                                        <form>
                                            <div class="form-row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="small mb-1" for="inputNombre">Nombre</label>
                                                        <input class="form-control py-4" id="inputNombre" type="text" placeholder="Ingrese su Nombre" />
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="small mb-1" for="inputApellido">Apellido</label>
                                                        <input class="form-control py-4" id="inputApellido" type="text" placeholder="Ingrese su Apellido" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="small mb-1" for="inputFechaNacimiento">Fecha de Nacimiento</label>
                                                <input class="form-control py-4" id="inputFechaNacimiento" type="text" placeholder="Ingrese su Fecha de Nacimiento" />
                                            </div>
                                            <label class="small mb-1" for="inputSexo">Sexo</label>
                                              <input class="form-control py-4" id="inputSexo" type="text" placeholder="Ingrese su sexo" />
                                            <!-- Validar que eligió -->
                                            <div class="form-row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <div class="btn-group">
                                                            <button type="button" class="btn btn-primary">Sexo</button>
                                                            <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                                <span class="sr-only">Toggle Dropdown</span>
                                                            </button>
                                                            <div class="dropdown-menu">
                                                                <a class="dropdown-item" href="#">Masculino</a>
                                                                <a class="dropdown-item" href="#">Femenino</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                             </div>
                                             <!--https://programacion.net/articulo/bootstrap_datetimepicker-_o_como_anadir_un_calendario_a_un_campo_input_1796-->
                                            <div class="form-group">
                                                <label class="small mb-1" for="inputNombreUsuario">Nombre de Usuario</label>
                                                <input class="form-control py-4" id="inputNombreUsuario" type="text" placeholder="Ingrese su Nombre de Usuario" />
                                            </div>                                           
                                            <div class="form-group">
                                                <label class="small mb-1" for="inputPassword">Contraseña</label>
                                                <input class="form-control py-4" id="inputPassword" type="password" placeholder="Ingrese la Contraseña" />
                                            </div> 
                                            <div class="form-group">
                                                <label class="small mb-1" for="inputTelefono">Teléfono</label>
                                                <input class="form-control py-4" id="inputTelefono" type="text" placeholder="Ingrese su Teléfono" />
                                            </div>
                                            <div class="form-group mt-4 mb-0"><a class="btn btn-primary btn-block" type= "submit" onclick="register()">Registrarse</a></div>
                                        </form>
                                    </div>                                
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
             <script>
                /*function register2(){
                    let xhr = new XMLHttpRequest();
                    var ruta = "https://proyecto2-2021.herokuapp.com/registro_paciente";
                    let json = JSON.stringify({
                        nombre: document.getElementById("inputNombre").value,
                        apellido: document.getElementById("inputApellido").value,
                        fecha_nacimiento: document.getElementById("inputFechaNacimiento").value,
                        sexo: document.getElementById("inputSexo").value,
                        nombre_usuario: document.getElementById("inputNombreUsuario").value,
                        contrasena: document.getElementById("inputPassword").value,
                        telefono: document.getElementById("inputTelefono").value,
                    })
                    console.log(json)
                    xhr.open("POST",ruta)
                    xhr.setRequestHeader('Content-type','application/json;charset=utf-8')
                    xhr.send(json)
                }*/
                function register(){
                    var ruta = "https://proyecto2-2021.herokuapp.com/registro_paciente";
                    const datos = JSON.stringify({
                        nombre: document.getElementById("inputNombre").value,
                        apellido: document.getElementById("inputApellido").value,
                        fecha_nacimiento: document.getElementById("inputFechaNacimiento").value,
                        sexo: document.getElementById("inputSexo").value,
                        nombre_usuario: document.getElementById("inputNombreUsuario").value,
                        contrasena: document.getElementById("inputPassword").value,
                        telefono: document.getElementById("inputTelefono").value,
                    })
                    const parametros={
                        headers:{
                            'content-type':'application/json; charset=UTF-8'
                        },
                        body: datos,
                        method: 'POST',
                    };
                    fetch(ruta,parametros)
                    .then(data=>{ return data.json()})
                    .then(res=>{console.log(res)
                        alert(res.mensaje)
                        if(res.agregado == 1){
                                window.location.href = "login.html"
                        }else{
                            window.location.href = "register.html"
                        }
                    })
                    .then(error=>console.log(error))
                }
            </script>
            

            <div id="layoutAuthentication_footer">
                <footer class="py-4 bg-light mt-auto">
                    <div class="container-fluid">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">Arnoldo Luis Antonio González Camey</div>
                             <div><a> &copy; 2021</a></div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>
    </body>
</html>
